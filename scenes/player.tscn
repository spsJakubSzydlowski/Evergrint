[gd_scene format=3 uid="uid://c1qq7niewlp5"]

[ext_resource type="Script" uid="uid://c0c4tt6r1hejr" path="res://scripts/player/player.gd" id="1_g2els"]
[ext_resource type="SpriteFrames" uid="uid://b3fnay367al5q" path="res://sprite_frames/player.tres" id="2_g2els"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dqkch"]
size = Vector2(10, 6)

[sub_resource type="CircleShape2D" id="CircleShape2D_g2els"]
radius = 40.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_g2els"]

[sub_resource type="Animation" id="Animation_qhqgy"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("WeaponPivot/Hand:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("WeaponPivot/Hand:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_dqkch"]
resource_name = "attack_swing_heavy"
length = 0.3
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("WeaponPivot/Hand:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(-90, 0, 0.3, 9.966666),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [0.0, -1.5707963267948966, 1.5707963267948966, 0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("WeaponPivot/Hand:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.15, 0.3),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(14, -12.21), Vector2(14, 3.06), Vector2(14, 15.365)]
}

[sub_resource type="Animation" id="Animation_g2els"]
resource_name = "attack_swing_light"
length = 0.3
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("WeaponPivot/Hand:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(-90, 0, 0.3, 9.966666),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [0.0, -1.5707963267948966, 1.5707963267948966, 0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("WeaponPivot/Hand:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.15, 0.3),
"transitions": PackedFloat32Array(1.109563, 1, 1.0717735),
"update": 0,
"values": [Vector2(8, -7), Vector2(15, 4), Vector2(12, 8)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_dqkch"]
_data = {
&"RESET": SubResource("Animation_qhqgy"),
&"attack_swing_heavy": SubResource("Animation_dqkch"),
&"attack_swing_light": SubResource("Animation_g2els")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qhqgy"]
size = Vector2(10, 21)

[node name="Player" type="CharacterBody2D" unique_id=382151949 groups=["Player"]]
y_sort_enabled = true
collision_layer = 2
safe_margin = 0.001
script = ExtResource("1_g2els")

[node name="pickup_collision" type="CollisionShape2D" parent="." unique_id=1433754025]
position = Vector2(-1, -3)
shape = SubResource("RectangleShape2D_dqkch")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="." unique_id=1935572899]
y_sort_enabled = true
sprite_frames = ExtResource("2_g2els")
animation = &"spawn"
offset = Vector2(0, -12)

[node name="Camera2D" type="Camera2D" parent="." unique_id=953755070]
position = Vector2(0, -12)

[node name="MagnetField" type="Area2D" parent="." unique_id=2104475133]
position = Vector2(0, -12)
collision_layer = 8
collision_mask = 16

[node name="CollisionShape2D" type="CollisionShape2D" parent="MagnetField" unique_id=1956623053]
shape = SubResource("CircleShape2D_g2els")

[node name="WeaponPivot" type="Node2D" parent="." unique_id=1067148515]
z_index = 1
position = Vector2(0, -12)

[node name="Hand" type="Node2D" parent="WeaponPivot" unique_id=1117562812]
visible = false

[node name="Sprite2D" type="Sprite2D" parent="WeaponPivot/Hand" unique_id=881053668]
position = Vector2(8.742276e-08, 0)
rotation = 0.7853982
centered = false

[node name="HitArea" type="Area2D" parent="WeaponPivot/Hand" unique_id=967466155]
collision_layer = 8
collision_mask = 5

[node name="CollisionShape2D" type="CollisionShape2D" parent="WeaponPivot/Hand/HitArea" unique_id=1964964745]
shape = SubResource("RectangleShape2D_g2els")
disabled = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="WeaponPivot/Hand" unique_id=1388179357]
root_node = NodePath("../../..")
libraries/ = SubResource("AnimationLibrary_dqkch")

[node name="invincibility_frames" type="Timer" parent="." unique_id=1754754439]
wait_time = 0.67
one_shot = true

[node name="damage_area" type="Area2D" parent="." unique_id=353189222 groups=["PlayerHitbox"]]
position = Vector2(0, -12)
collision_layer = 2
collision_mask = 36

[node name="damage_collision" type="CollisionShape2D" parent="damage_area" unique_id=968192332]
position = Vector2(-1, 1)
shape = SubResource("RectangleShape2D_qhqgy")

[connection signal="area_entered" from="MagnetField" to="." method="_on_magnet_field_area_entered"]
[connection signal="area_entered" from="WeaponPivot/Hand/HitArea" to="." method="_on_hit_area_area_entered"]
[connection signal="timeout" from="invincibility_frames" to="." method="_on_invincibility_frames_timeout"]
